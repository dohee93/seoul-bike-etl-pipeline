# ğŸš² ì„œìš¸ì‹œ ê³µê³µìì „ê±° ETL íŒŒì´í”„ë¼ì¸

ì„œìš¸ì‹œ ê³µê³µìì „ê±°(ë”°ë¦‰ì´) ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ë¶„ì„í•˜ëŠ” ë°ì´í„° íŒŒì´í”„ë¼ì¸ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|------|------|
| ëª©ì  | ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§ í¬íŠ¸í´ë¦¬ì˜¤ |
| ê¸°ê°„ | 2025.12 ~ 2026.01 |
| ë°ì´í„° | ì„œìš¸ì‹œ ê³µê³µìì „ê±° ì‹¤ì‹œê°„ ëŒ€ì—¬ ì •ë³´ API |

## ğŸ—ï¸ ì•„í‚¤í…ì²˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Seoul API  â”‚â”€â”€â”€â”€â–¶â”‚   Airflow   â”‚â”€â”€â”€â”€â–¶â”‚   AWS S3    â”‚
â”‚  (ë”°ë¦‰ì´)     â”‚     â”‚ (ìŠ¤ì¼€ì¤„ë§)    â”‚     â”‚ (Data Lake) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â–¼             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Raw    â”‚  â”‚  Cleaned â”‚
              â”‚  Layer   â”‚  â”‚  Layer   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   Mart   â”‚
                          â”‚  Layer   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

| ë¶„ë¥˜ | ê¸°ìˆ  |
|------|------|
| Language | Python 3.9+ |
| Orchestration | Apache Airflow 2.10 |
| Storage | AWS S3 |
| Container | Docker, Docker Compose |
| Data Processing | Pandas |
| File Format | JSON (Raw), Parquet (Cleaned, Mart) |

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
bike-etl-project/
â”œâ”€â”€ dags/
â”‚   â””â”€â”€ bike_etl_dag.py      # Airflow DAG ì •ì˜
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ extract.py           # API ë°ì´í„° ìˆ˜ì§‘
â”‚   â”œâ”€â”€ load_raw.py          # S3 Raw ì €ì¥
â”‚   â”œâ”€â”€ transform.py         # ë°ì´í„° ì •ì œ
â”‚   â”œâ”€â”€ validate.py          # í’ˆì§ˆ ê²€ì¦
â”‚   â”œâ”€â”€ load_cleaned.py      # S3 Cleaned ì €ì¥
â”‚   â”œâ”€â”€ mart.py              # ë§ˆíŠ¸ ìƒì„±
â”‚   â””â”€â”€ load_mart.py         # S3 Mart ì €ì¥
â”œâ”€â”€ logs/
â”œâ”€â”€ plugins/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

## ğŸ”„ íŒŒì´í”„ë¼ì¸ íë¦„
```
extract â†’ load_raw â†’ transform â†’ validate â†’ load_cleaned â†’ create_mart
```

| Task | ì„¤ëª… |
|------|------|
| extract | ì„œìš¸ì‹œ APIì—ì„œ ì‹¤ì‹œê°„ ëŒ€ì—¬ ì •ë³´ ìˆ˜ì§‘ |
| load_raw | S3 Raw Layerì— JSON ì €ì¥ |
| transform | ë°ì´í„° ì •ì œ (íƒ€ì… ë³€í™˜, ê²°ì¸¡ì¹˜ ì²˜ë¦¬, ì´ìƒì¹˜ í•„í„°ë§) |
| validate | ë°ì´í„° í’ˆì§ˆ ê²€ì¦ |
| load_cleaned | S3 Cleaned Layerì— Parquet ì €ì¥ |
| create_mart | ë¶„ì„ìš© ë§ˆíŠ¸ í…Œì´ë¸” ìƒì„± |

## ğŸ“Š ë°ì´í„° ë ˆì´ì–´

### Raw Layer
- í˜•ì‹: JSON
- ê²½ë¡œ: `s3://bucket/raw/bike_rental/dt=YYYY-MM-DD/`
- ë‚´ìš©: API ì›ë³¸ ì‘ë‹µ ê·¸ëŒ€ë¡œ ì €ì¥

### Cleaned Layer
- í˜•ì‹: Parquet
- ê²½ë¡œ: `s3://bucket/cleaned/bike_rental/dt=YYYY-MM-DD/`
- ë‚´ìš©: ì •ì œëœ ë°ì´í„° (ì»¬ëŸ¼ëª… ë³€í™˜, íƒ€ì… ë³€í™˜, íŒŒìƒ ì»¬ëŸ¼ ì¶”ê°€)

### Mart Layer
- í˜•ì‹: Parquet
- ê²½ë¡œ: `s3://bucket/mart/{mart_name}/dt=YYYY-MM-DD/`

| ë§ˆíŠ¸ | ì„¤ëª… |
|------|------|
| daily_station_summary | ì¼ë³„ ëŒ€ì—¬ì†Œë³„ ìš”ì•½ |
| hourly_pattern | ì‹œê°„ëŒ€ë³„ ì´ìš© íŒ¨í„´ |
| station_ranking | ëŒ€ì—¬ì†Œ ë­í‚¹ |

## âš™ï¸ ì‹¤í–‰ ë°©ë²•

### 1. í™˜ê²½ ì„¤ì •
```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/your-username/seoul-bike-etl-pipeline.git
cd seoul-bike-etl-pipeline

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ì— API í‚¤ ë° AWS ì„¤ì • ì…ë ¥
```

### 2. Airflow ì‹¤í–‰
```bash
# Docker Compose ì‹¤í–‰
docker-compose up -d

# ì›¹ UI ì ‘ì†
# http://localhost:8080 (admin / admin)
```

### 3. DAG ì‹¤í–‰

- Airflow ì›¹ UIì—ì„œ `bike_rental_etl` DAG í™œì„±í™”
- ìˆ˜ë™ ì‹¤í–‰ ë˜ëŠ” ìŠ¤ì¼€ì¤„ ì‹¤í–‰ (ë§¤ì¼ 09:00 KST)

## ğŸ” í™˜ê²½ ë³€ìˆ˜

`.env` íŒŒì¼ì— ë‹¤ìŒ ë³€ìˆ˜ ì„¤ì • í•„ìš”:
```
AIRFLOW_UID=50000
SEOUL_API_KEY=your_api_key
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=ap-northeast-2
S3_BUCKET_NAME=your_bucket_name
```

## ğŸ“ˆ ì£¼ìš” ê¸°ëŠ¥

- âœ… ìë™ ìŠ¤ì¼€ì¤„ë§ (ë§¤ì¼ 09:00)
- âœ… ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„ (ìµœëŒ€ 2íšŒ)
- âœ… ë°ì´í„° í’ˆì§ˆ ê²€ì¦
- âœ… ë ˆì´ì–´ë³„ ë°ì´í„° ê´€ë¦¬ (Raw â†’ Cleaned â†’ Mart)
- âœ… Parquet í¬ë§·ìœ¼ë¡œ íš¨ìœ¨ì  ì €ì¥

## ğŸ“ ë°°ìš´ ì 

- Airflowë¥¼ í™œìš©í•œ ì›Œí¬í”Œë¡œìš° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- Dockerë¥¼ í™œìš©í•œ ê°œë°œ í™˜ê²½ êµ¬ì„±
- AWS S3 ê¸°ë°˜ Data Lake ì•„í‚¤í…ì²˜
- ETL íŒŒì´í”„ë¼ì¸ ì„¤ê³„ ë° êµ¬í˜„
- ë°ì´í„° í’ˆì§ˆ ê²€ì¦ ìë™í™”

## ğŸš€ í–¥í›„ ê°œì„  ì‚¬í•­

- [ ] Slack ì•Œë¦¼ ì—°ë™
- [ ] PySparkë¡œ ëŒ€ìš©ëŸ‰ ì²˜ë¦¬ í™•ì¥
- [ ] DBTë¥¼ í™œìš©í•œ ë°ì´í„° ëª¨ë¸ë§
- [ ] ëŒ€ì‹œë³´ë“œ ì‹œê°í™” (Superset, Metabase)

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License